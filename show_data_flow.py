"""
Visual representation of ABSA data flow in the Myntra Review Scrapper
"""

def print_data_flow_diagram():
    print("ğŸ¯ ABSA DATA FLOW - MYNTRA REVIEW SCRAPPER")
    print("=" * 60)
    print()
    
    print("ğŸ“± USER INPUT")
    print("    â”‚")
    print("    â–¼")
    print("ğŸŒ STREAMLIT APP (app.py)")
    print("    â”‚")
    print("    â–¼")
    print("ğŸ“‹ INPUT METHOD SELECTION")
    print("    â”‚")
    print("    â”œâ”€â”€â”€ ğŸ”— URL-BASED SCRAPING")
    print("    â”‚    â”‚")
    print("    â”‚    â”œâ”€ validate_myntra_url()")
    print("    â”‚    â”œâ”€ URLScrapeReviews class")
    print("    â”‚    â”‚  (src/scrapper/url_scrape.py)")
    print("    â”‚    â”œâ”€ Chrome WebDriver")
    print("    â”‚    â”œâ”€ BeautifulSoup parsing")
    print("    â”‚    â””â”€ Returns DataFrame")
    print("    â”‚")
    print("    â””â”€â”€â”€ ğŸ” SEARCH-BASED SCRAPING")
    print("         â”‚")
    print("         â”œâ”€ Product name + quantity")
    print("         â”œâ”€ ScrapeReviews class")
    print("         â”‚  (src/scrapper/scrape.py)")
    print("         â”œâ”€ Chrome WebDriver")
    print("         â”œâ”€ BeautifulSoup parsing")
    print("         â””â”€ Returns DataFrame")
    print("    â”‚")
    print("    â–¼")
    print("ğŸ’¾ DATA STORAGE")
    print("    â”‚")
    print("    â”œâ”€ st.session_state storage")
    print("    â”œâ”€ MongoDB via MongoIO")
    print("    â””â”€ (src/cloud_io/__init__.py)")
    print("    â”‚")
    print("    â–¼")
    print("ğŸ“„ ANALYSIS PAGE")
    print("    â”‚ (pages/generate_analysis.py)")
    print("    â–¼")
    print("ğŸ¯ ABSA METHOD SELECTION")
    print("    â”‚")
    print("    â”œâ”€â”€â”€ â­ VADER (Recommended)")
    print("    â”‚    â”‚ (src/absa/absa_analyzer.py)")
    print("    â”‚    â”œâ”€ ABSAAnalyzer class")
    print("    â”‚    â””â”€ Rule-based sentiment")
    print("    â”‚")
    print("    â”œâ”€â”€â”€ ğŸ§ª ENHANCED (TextBlob+VADER)")
    print("    â”‚    â”‚ (src/absa/simple_advanced_absa.py)")
    print("    â”‚    â”œâ”€ SimpleAdvancedABSA class")
    print("    â”‚    â””â”€ Combined approach")
    print("    â”‚")
    print("    â””â”€â”€â”€ ğŸ¤– TRANSFORMER (Experimental)")
    print("         â”‚ (src/absa/advanced_absa.py)")
    print("         â”œâ”€ AdvancedABSAAnalyzer class")
    print("         â””â”€ HuggingFace models")
    print("    â”‚")
    print("    â–¼")
    print("ğŸ” ABSA PROCESSING PIPELINE")
    print("    â”‚")
    print("    â”œâ”€ 1. preprocess_reviews()")
    print("    â”‚   â”œâ”€ Text cleaning")
    print("    â”‚   â””â”€ Normalization")
    print("    â”‚")
    print("    â”œâ”€ 2. extract_aspects()")
    print("    â”‚   â”œâ”€ Keyword matching")
    print("    â”‚   â””â”€ Pattern recognition")
    print("    â”‚")
    print("    â”œâ”€ 3. classify_sentiment()")
    print("    â”‚   â”œâ”€ VADER analysis")
    print("    â”‚   â”œâ”€ TextBlob polarity")
    print("    â”‚   â””â”€ Transformer models")
    print("    â”‚")
    print("    â”œâ”€ 4. extract_aspect_context()")
    print("    â”‚   â””â”€ Context window extraction")
    print("    â”‚")
    print("    â””â”€ 5. Result compilation")
    print("        â”œâ”€ Enhanced reviews DataFrame")
    print("        â”œâ”€ Detailed ABSA DataFrame")
    print("        â””â”€ Aspect summary statistics")
    print("    â”‚")
    print("    â–¼")
    print("ğŸ“Š VISUALIZATION & RESULTS")
    print("    â”‚")
    print("    â”œâ”€ ğŸ“ˆ Plotly charts")
    print("    â”‚   â”œâ”€ Aspect distribution")
    print("    â”‚   â”œâ”€ Sentiment heatmaps")
    print("    â”‚   â””â”€ Performance metrics")
    print("    â”‚")
    print("    â”œâ”€ ğŸ¨ Interactive dashboard")
    print("    â”‚   â”œâ”€ Sample reviews")
    print("    â”‚   â”œâ”€ Confidence scores")
    print("    â”‚   â””â”€ Model comparisons")
    print("    â”‚")
    print("    â””â”€ ğŸ’¾ Export options")
    print("        â”œâ”€ CSV downloads")
    print("        â””â”€ Enhanced data")
    print()
    print("ğŸ¯ DETECTED ASPECTS:")
    print("   â€¢ Style/Design")
    print("   â€¢ Quality/Material") 
    print("   â€¢ Size/Fit")
    print("   â€¢ Price/Value")
    print("   â€¢ Delivery/Service")
    print()
    print("ğŸ“Š OUTPUT FORMATS:")
    print("   â€¢ Sentiment Labels: Positive/Negative/Neutral")
    print("   â€¢ Confidence Scores: 0.0 to 1.0")
    print("   â€¢ Compound Scores: -1.0 to +1.0")
    print("   â€¢ Aspect Counts and Percentages")

def print_file_structure():
    print("\n" + "=" * 60)
    print("ğŸ“ KEY FILES IN ABSA FLOW")
    print("=" * 60)
    
    files = [
        ("ğŸŒ app.py", "Main Streamlit app - User interface & input handling"),
        ("ğŸ“„ pages/generate_analysis.py", "Analysis page - ABSA method selection & results"),
        ("ğŸ”— src/scrapper/url_scrape.py", "URL-based scraping - Direct product URL processing"),
        ("ğŸ” src/scrapper/scrape.py", "Search-based scraping - Product search & multi-product"),
        ("ğŸ’¾ src/cloud_io/__init__.py", "Database operations - MongoDB storage/retrieval"),
        ("ğŸ¯ src/absa/absa_analyzer.py", "Core ABSA - VADER sentiment analysis"),
        ("ğŸ§ª src/absa/simple_advanced_absa.py", "Enhanced ABSA - TextBlob + VADER combination"),
        ("ğŸ¤– src/absa/advanced_absa.py", "Advanced ABSA - Transformer models"),
        ("âš™ï¸ src/exception.py", "Error handling - Custom exception management"),
        ("ğŸ“Š src/data_report/generate_data_report.py", "General analytics - Non-ABSA visualizations")
    ]
    
    for icon_file, description in files:
        print(f"{icon_file:<40} â”‚ {description}")

def print_data_structures():
    print("\n" + "=" * 60)
    print("ğŸ“‹ KEY DATA STRUCTURES")
    print("=" * 60)
    
    print("\nğŸ”¢ INPUT DATA (from scraping):")
    print("   DataFrame columns: [Product Name, Over_All_Rating, Price, Date, Rating, Name, Comment]")
    
    print("\nğŸ¯ ABSA RESULTS (enhanced_reviews):")
    print("   Original columns + [detected_aspects, aspect_sentiments, avg_sentiment_score]")
    
    print("\nğŸ“Š DETAILED ANALYSIS (detailed_absa):")
    print("   [review_index, original_review, aspect, sentiment_label,")
    print("    positive_score, negative_score, neutral_score, compound_score,")
    print("    model_used, confidence]")
    
    print("\nğŸ“ˆ SUMMARY STATS (aspect_summary):")
    print("   [aspect, sentiment_label, count, avg_sentiment_score, percentage]")
    
    print("\nğŸ‰ FINAL RESULTS (analysis_results dict):")
    print("   â€¢ product_name, total_reviews, overall_avg_sentiment")
    print("   â€¢ enhanced_reviews, detailed_absa, aspect_summary")
    print("   â€¢ most_mentioned_aspects, model_usage, confidence_stats")

if __name__ == "__main__":
    print_data_flow_diagram()
    print_file_structure()
    print_data_structures()
    
    print("\n" + "ğŸ¯" * 20)
    print("ABSA DATA FLOW SUMMARY COMPLETE!")
    print("ğŸ¯" * 20)
